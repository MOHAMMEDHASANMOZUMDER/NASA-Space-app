<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style2.css" />
        <title>Mars Recycler</title>
    </head>
    <body>
        <div id="container"></div>
        <header>
            <div class="nav">
                <div class="logo">
                    <a
                        href="#project-hero"
                        aria-label="Mars Recycler Home"
                        style="
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                            text-decoration: none;
                            color: inherit;
                        "
                    >
                        <svg
                            width="32"
                            height="32"
                            viewBox="0 0 64 64"
                            role="img"
                            aria-label="Mars planet logo"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <defs>
                                <radialGradient id="marsGrad" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" stop-color="#f2a57e" />
                                    <stop offset="60%" stop-color="#c36a4a" />
                                    <stop offset="100%" stop-color="#8b3b2e" />
                                </radialGradient>
                            </defs>
                            <circle cx="32" cy="32" r="30" fill="url(#marsGrad)" />
                            <path
                                d="M8 28c8-6 20-8 32-4M10 40c10-4 18-2 28 2M22 18c6 2 10 4 18 6"
                                stroke="#7a2f25"
                                stroke-width="3"
                                stroke-linecap="round"
                                opacity=".5"
                                fill="none"
                            />
                            <circle cx="46" cy="18" r="3" fill="#e8cbaa" opacity=".8" />
                        </svg>
                        <span>Mars Recycler</span>
                    </a>
                </div>
                <nav class="links">
                    <a href="#project-hero">Home</a> <a href="#Workflow">Workflow</a>
                    <a href="#gallery">Models</a> <a href="#architecture">Architecture</a>
                </nav>
                <a href=""></a>
            </div>
        </header>
        <!-- HERO -->
        <section id="project-hero" class="content-section">
            <div class="content-inner">
                <div class="text-content">
                    <div class="left-hero">
                        <div id="mars-canvas" class="mars-canvas" aria-hidden="false"></div>
                        <div class="hero-overlay">
                            <a
                                class="nasa-badge"
                                href="https://www.spaceappschallenge.org/"
                                target="_blank"
                                rel="noopener"
                                aria-label="NASA Space Apps"
                                style="
                                    display: flex;
                                    align-items: center;
                                    gap: 0.5rem;
                                    text-decoration: none;
                                    color: inherit;
                                "
                            >
                                <img
                                    width="48"
                                    height="48"
                                    src="https://img.icons8.com/color/48/nasa.png"
                                    alt="NASA"
                                />
                                <span>NASA Space Apps</span>
                            </a>
                            <h1 class="title">Mars</h1>
                            <h2 class="subtitle" style="color: #9c2e35">Recycler</h2>
                            <p class="description" style="color: #ffffff">
                                Revolutionary modular recycling system for sustainable Mars
                                exploration. Converting space waste into valuable resources
                                through advanced pyrolysis and reformation technology.
                            </p>
                            <a
                                href="#system"
                                class="cta-danger"
                                role="button"
                                aria-label="Explore System"
                            >
                                Explore System <span class="arrow" aria-hidden="true">→</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="video-content" aria-label="YouTube video ">
                    <iframe
                        width="460"
                        height="300"
                        src="https://www.youtube.com/watch?v=n2dVFdqMYGA&list=RDn2dVFdqMYGA&start_radio=1"
                        title="YouTube video player"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
        </section>
        <section id="Workflow" class="section">
            <div class="wrap">
                <h2 class="title">Workflow</h2>
                <p class="subtitle">Processing flow and energy storage pipeline</p>
                <div class="architecture">
                    <div class="flowchart-container">
                        <img src="textures/Flowchart.png" alt="Waste2Watt Flowchart" />
                    </div>
                </div>
            </div>
        </section>
        <section id="gallery" class="section" style="background: #151515">
            <div class="wrap">
                <h2 class="title" style="color: var(--mars-orange)">Models</h2>
                <p class="subtitle">Caption or details</p>
                <div class="gallery">
                    <div class="card">
                        <div class="card-img">Image</div>
                        <div class="card-body">
                            <h4>model name</h4>
                            <p>description</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-img">Diagram</div>
                        <div class="card-body">
                            <h4>System Flowchart</h4>
                            <p>diagram</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-img">image</div>
                        <div class="card-body">
                            <h4>name</h4>
                            <p>detail.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="system" class="section">
            <div class="wrap">
                <h2 class="title">Subsystem Specifications</h2>
                <p class="subtitle">Detailed breakdown of modules and features</p>
                <div class="specs">
                    <div class="spec">
                        <h4>Intake & Shredder</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Intelligent Sorting</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Pyrolysis</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Reforming</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Cleanup</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Condenser</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <!-- cspell:ignore SOFC -->
                        <h4><abbr title="Solid Oxide Fuel Cell">SOFC</abbr> Power</h4>
                        <p>details</p>
                    </div>
                    <div class="spec">
                        <h4>Power Management</h4>
                        <p>details</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Added sections from the other file (structure preserved, only new sections appended) -->
        <section id="workflow" class="section">
            <div class="wrap"></div>
                <h2 class="title">♻️ Workflow</h2>
                <div id="workflow-steps"></div>
            </div>
        </section>
        <style>
            :root {
                --accent: var(--mars-orange, #e4572e);
                --surface: #141414;
                --surface-2: #1b1b1b;
                --border: #2a2a2a;
                --text: #e7e7e7;
                --muted: #9aa0a6;
                --shadow: 0 6px 24px rgba(0, 0, 0, 0.35);
            }

            /* Reusable data card */
            .data-box {
                background: var(--surface);
                border: 1px solid var(--border);
                color: var(--text);
                border-radius: 12px;
                padding: 14px 16px;
                box-shadow: var(--shadow);
                transition: border-color 180ms ease, transform 180ms ease,
                    box-shadow 180ms ease;
            }
            .data-box:hover {
                border-color: color-mix(in srgb, var(--accent) 40%, var(--border));
                transform: translateY(-2px);
                box-shadow: 0 10px 28px rgba(0, 0, 0, 0.45);
            }

            /* Process Waste (architecture) */
            #architecture .wrap {
                gap: 12px;
            }
            .process-controls {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                align-items: center;
                margin: 8px 0 14px;
            }
            .process-controls select,
            .process-controls input[type="number"] {
                appearance: none;
                background: var(--surface-2);
                color: var(--text);
                border: 1px solid var(--border);
                border-radius: 10px;
                padding: 10px 12px;
                min-width: 180px;
                outline: none;
                transition: border-color 160ms ease, box-shadow 160ms ease;
            }
            .process-controls select:focus,
            .process-controls input[type="number"]:focus {
                border-color: var(--accent);
                box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 30%, transparent);
            }
            .process-controls button {
                cursor: pointer;
                border: 0;
                border-radius: 10px;
                padding: 10px 14px;
                font-weight: 600;
                color: #111;
                background: linear-gradient(135deg, #ff8a4c, var(--accent));
                box-shadow: 0 6px 16px rgba(228, 87, 46, 0.35);
                transition: transform 120ms ease, box-shadow 120ms ease, filter 120ms ease;
            }
            .process-controls button:hover {
                transform: translateY(-1px);
                filter: brightness(1.05);
                box-shadow: 0 10px 20px rgba(228, 87, 46, 0.45);
            }
            #process-result {
                margin-top: 6px;
            }

            /* Waste Types grid */
            #waste-list {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                gap: 12px;
                margin-top: 10px;
            }
            #waste-list .data-box b {
                display: block;
                color: #fff;
                letter-spacing: 0.04em;
                margin-bottom: 6px;
            }
            #waste-list .data-box {
                line-height: 1.35;
            }

            /* Mars Data layout */
            .mars-grid {
                display: grid;
                grid-template-columns: 1.1fr 1.9fr;
                gap: 12px;
                align-items: start;
                margin-top: 8px;
            }
            #mars-weather {
                min-height: 140px;
            }

            /* Photo wall inside data box */
            #mars-photos {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 8px;
                padding: 12px;
            }
            #mars-photos img {
                width: 100% !important;
                height: 110px;
                object-fit: cover;
                border-radius: 10px;
                margin: 0 !important;
                border: 1px solid var(--border);
                transition: transform 140ms ease, box-shadow 140ms ease;
            }
            #mars-photos img:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
            }

            /* Mobile tweaks */
            @media (max-width: 700px) {
                .process-controls {
                    flex-direction: column;
                    align-items: stretch;
                }
                .process-controls select,
                .process-controls input[type="number"],
                .process-controls button {
                    width: 100%;
                }
                .mars-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>

        <section id="architecture" class="section">
            <div class="wrap">
                <h2 class="title">⚡ Process Waste</h2>
                <div class="process-controls">
                    <select id="waste-type">
                        <option value="organic">Organic</option>
                        <option value="plastic">Plastic</option>
                        <option value="metal">Metal</option>
                        <option value="e-waste">E-Waste</option>
                    </select>
                    <input type="number" id="waste-weight" placeholder="Weight (kg)" />
                    <button onclick="simulateProcess()">Process Waste</button>
                </div>
                <div id="process-result" class="data-box"></div>
            </div>
        </section>

        <section id="waste-types" class="section">
            <div class="wrap">
                <h2 class="title">🗑️ Waste Types</h2>
                <div id="waste-list"></div>
            </div>
        </section>

        <section id="mars-data" class="section">
            <div class="wrap">
                <h2 class="title">🌌 Mars Data</h2>
                <div class="mars-grid">
                    <div id="mars-weather" class="data-box">Loading weather...</div>
                    <div id="mars-photos" class="data-box">Loading photos...</div>
                </div>
            </div>
        </section>
        <footer>
            <div class="foot-wrap"></div>
            <div class="copyright">
                © 2025 Mars Recycler Project. All rights reserved.
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/js/controls/OrbitControls.js"></script>
        <script src="script.js"></script>
        <!-- Appended script for new sections -->
     <script>
    const API_URL = "http://localhost:5000";

    // --- Workflow Steps ---
    (function() {
        const container = document.getElementById("workflow-steps");
        if (!container) return;
        fetch(`${API_URL}/api/workflow`)
            .then(r => r.json())
            .then(data => {
                const steps = data.steps || [];
                if (!steps.length) {
                    container.textContent = "No workflow data available.";
                    return;
                }
                steps.forEach(step => {
                    const div = document.createElement("div");
                    div.className = "data-box";
                    div.textContent = step;
                    container.appendChild(div);
                });
            })
            .catch(() => { container.textContent = "Failed to load workflow."; });
    })();

    // --- Waste Types ---
    (function() {
        const container = document.getElementById("waste-list");
        if (!container) return;
        fetch(`${API_URL}/api/waste-types`)
            .then(r => r.json())
            .then(data => {
                const types = data || [];
                if (!types.length) {
                    container.textContent = "No waste types available.";
                    return;
                }
                types.forEach(waste => {
                    const div = document.createElement("div");
                    div.className = "data-box";
                    const efficiency = waste.efficiency != null ? (waste.efficiency * 100).toFixed(0) + "%" : "N/A";
                    const byproducts = Array.isArray(waste.byproducts) ? waste.byproducts.join(", ") : "N/A";
                    div.innerHTML = `<b>${String(waste.type || "").toUpperCase()}</b><br>Efficiency: ${efficiency}<br>Byproducts: ${byproducts}`;
                    container.appendChild(div);
                });
            })
            .catch(() => { container.textContent = "Failed to load waste types."; });
    })();

    // --- Process Waste ---
    function simulateProcess() {
        const typeEl = document.getElementById("waste-type");
        const weightEl = document.getElementById("waste-weight");
        const resultEl = document.getElementById("process-result");
        if (!typeEl || !weightEl || !resultEl) return;

        const type = typeEl.value;
        const weight = parseFloat(weightEl.value);
        if (isNaN(weight) || weight <= 0) {
            resultEl.textContent = "Enter a valid weight.";
            return;
        }

        fetch(`${API_URL}/api/process`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ type, weight })
        })
        .then(r => r.json())
        .then(res => {
            const byproducts = Array.isArray(res.byproducts) ? res.byproducts.join(", ") : "N/A";
            resultEl.innerHTML = `<b>Processed ${res.input_weight}kg of ${res.type} waste</b><br>
                                                        Energy Generated: ⚡ ${res.energy_kwh} kWh<br>
                                                        Byproducts: ${byproducts}`;
        })
        .catch(() => { resultEl.textContent = "Processing failed."; });
    }

    // --- Mars Weather ---
    (function() {
        const box = document.getElementById("mars-weather");
        if (!box) return;
        fetch(`${API_URL}/api/mars-weather`)
            .then(r => r.json())
            .then(res => {
                const sol = res.sol || "N/A";
                const date = res.date ? new Date(res.date).toDateString() : "N/A";
                const temp = res.temp != null ? res.temp + " °C" : "N/A";
                const wind = res.wind != null ? res.wind + " m/s" : "N/A";
                const pressure = res.pressure != null ? res.pressure + " Pa" : "N/A";
                box.innerHTML = `<b>Sol ${sol}</b><br>
                                                 Date: ${date}<br>
                                                 Temperature: ${temp}<br>
                                                 Wind: ${wind}<br>
                                                 Pressure: ${pressure}`;
            })
            .catch(() => { box.textContent = "Failed to load Mars weather."; });
    })();

    // --- Mars Rover Photos ---
    (function() {
        const container = document.getElementById("mars-photos");
        if (!container) return;
        fetch(`${API_URL}/api/mars-photos`)
            .then(r => r.json())
            .then(res => {
                container.innerHTML = ""; // clear loading text
                if (!res.photos || !res.photos.length) {
                    container.textContent = "No Mars rover photos available.";
                    return;
                }
                res.photos.forEach(src => {
                    const img = document.createElement("img");
                    img.src = src;
                    img.alt = "Mars rover";
                    img.style.width = "200px";
                    img.style.margin = "5px";
                    img.loading = "lazy";
                    container.appendChild(img);
                });
            })
            .catch(() => { container.textContent = "Failed to load rover photos."; });
    })();
</script>

    </body>
</html>
