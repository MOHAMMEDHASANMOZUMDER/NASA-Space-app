<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mars Recycler</title>
<style>
body { font-family: Arial; margin:0; background:#111; color:white; }
header { background:#0d0d0d; padding:12px 24px; position:sticky; top:0; display:flex; justify-content:space-between; align-items:center; }
.logo { display:flex; align-items:center; font-size:22px; font-weight:bold; }
.logo img { height:40px; margin-right:10px; }
nav a { margin-left:20px; text-decoration:none; color:white; font-size:16px; }
nav a:hover { color:#f05454; }
section { padding:60px; min-height:100vh; }
.data-box { background:#222; padding:20px; border-radius:10px; margin:15px 0; }
input, select, button { padding:8px; margin:5px; border-radius:5px; border:none; }
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="mars-logo.png" alt="Mars Logo">
    Mars Recycler
  </div>
  <nav>
    <a href="#project-hero">Home</a>
    <a href="#workflow">Workflow</a>
    <a href="#gallery">Models</a>
    <a href="#architecture">Architecture</a>
    <a href="#mars-data">Mars Data</a>
  </nav>
</header>

<section id="project-hero">
  <h1>Welcome to Mars Recycler üåå</h1>
  <p>This project shows how waste on Mars can be recycled into energy.</p>
</section>

<section id="workflow">
  <h2>‚ôªÔ∏è Workflow</h2>
  <div id="workflow-steps"></div>
</section>

<section id="gallery">
  <h2>üóëÔ∏è Waste Types</h2>
  <div id="waste-list"></div>
</section>

<section id="architecture">
  <h2>‚ö° Process Waste</h2>
  <select id="waste-type">
    <option value="organic">Organic</option>
    <option value="plastic">Plastic</option>
    <option value="metal">Metal</option>
    <option value="e-waste">E-Waste</option>
  </select>
  <input type="number" id="waste-weight" placeholder="Weight (kg)" />
  <button onclick="simulateProcess()">Process Waste</button>
  <div id="process-result" class="data-box"></div>
</section>

<section id="mars-data">
  <h2>üåå Mars Data</h2>
  <div id="mars-weather" class="data-box">Loading weather...</div>
  <div id="mars-photos" class="data-box">Loading photos...</div>
</section>

<script>
const API_URL = "http://localhost:5000";

// Workflow
fetch(`${API_URL}/api/workflow`).then(r=>r.json()).then(data=>{
  const container = document.getElementById("workflow-steps");
  data.steps.forEach(step => { const div=document.createElement("div"); div.classList.add("data-box"); div.textContent=step; container.appendChild(div); });
});

// Waste Types
fetch(`${API_URL}/api/waste-types`).then(r=>r.json()).then(data=>{
  const container = document.getElementById("waste-list");
  data.forEach(waste => {
    const div=document.createElement("div");
    div.classList.add("data-box");
    div.innerHTML=`<b>${waste.type.toUpperCase()}</b><br>Efficiency: ${waste.efficiency*100}%<br>Byproducts: ${waste.byproducts.join(", ")}`;
    container.appendChild(div);
  });
});

// Process Waste
function simulateProcess(){
  const type=document.getElementById("waste-type").value;
  const weight=parseFloat(document.getElementById("waste-weight").value);
  fetch(`${API_URL}/api/process`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({type, weight})
  }).then(r=>r.json()).then(res=>{
    document.getElementById("process-result").innerHTML=
      `<b>Processed ${res.input_weight}kg of ${res.type} waste</b><br>
       Energy Generated: ‚ö° ${res.energy_kwh} kWh<br>
       Byproducts: ${res.byproducts.join(", ")}`;
  });
}

// Mars Weather
fetch(`${API_URL}/api/mars-weather`).then(r=>r.json()).then(res=>{
  document.getElementById("mars-weather").innerHTML=
    `<b>Sol ${res.sol}</b><br>
     Date: ${new Date(res.date).toDateString()}<br>
     Temperature: ${res.temp ? res.temp+" ¬∞C" : "N/A"}<br>
     Wind: ${res.wind ? res.wind+" m/s" : "N/A"}<br>
     Pressure: ${res.pressure ? res.pressure+" Pa" : "N/A"}`;
});

// Mars Rover Photos
(function() {
  const container = document.getElementById("mars-photos");
  if (!container) return;

  // Clear any previous content / loading text
  container.innerHTML = "Loading photos...";

  fetch(`${API_URL}/api/mars-photos`)
    .then(response => response.json())
    .then(data => {
      container.innerHTML = ""; // clear loading text
      const photos = data.photos || [];

      if (photos.length === 0) {
        container.textContent = "No photos available.";
        return;
      }

      photos.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        img.alt = "Mars rover";
        img.style.width = "200px";
        img.style.margin = "5px";
        img.loading = "lazy";
        container.appendChild(img);
      });
    })
    .catch(err => {
      console.error(err);
      container.textContent = "Failed to load rover photos.";
    });
})();

</script>

</body>
</html>
